<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Bluevia: Location API guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="blv_php_location_guide">Location API guide </a></h1><p>This API enables your application or mobile website to retrieve the geographical coordinates of a terminal where Location is expressed through a latitude, longitude, altitude and accuracy. Such operation covers the requesting for the location of a terminal.</p>
<p>If you want to understand how LocationAPI works please read the BlueVia <a href="file:///en/knowledge/APIs.API-Guides.Location">Location API guide</a>, you can also get really into the details reading <a href="file:///en/knowledge/APIs.API-Reference.Location">Mobile LocationAPI reference</a> </p>
<h2><a class="anchor" id="location_client_set_up_sec">
Location API client set up</a></h2>
<p>BlueVia uses OAuth as its authentication mechanism which enables websites and applications to access the BlueVia API's without end users disclosing their personal credentials. In order to grant access to the server any client has to be created passing the security credential as parameter in its constructor. These security credentials are managed internally and added as a HTTP header in every request sent to the server. Such Oauth security credentials are: </p>
<ul>
<li>
<p class="startli"><b>Consumer key</b><br/>
 The string identifying the application- you obtained when you registered your application within the provisioning portal.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><b>Consumer Secret</b><br/>
 A secret -a string- used by the consumer to establish ownership of the consumer key.</p>
<p class="endli"></p>
</li>
<li>
<b>Access token</b><br/>
 The token -OAuth access token- used by the client for granting access permissions to the server </li>
</ul>
<p>As detailed previosly, you have to set up your <a class="el" href="class_bluevia_client.html">BlueviaClient</a> object: </p>
<div class="fragment"><pre class="fragment">application_context = array(
    <span class="stringliteral">&#39;user&#39;</span> =&gt; array(
        <span class="stringliteral">&#39;token_access&#39;</span> =&gt; $token,
        <span class="stringliteral">&#39;token_secret&#39;</span> =&gt; $token_secret,
    ),
    <span class="stringliteral">&#39;app&#39;</span> =&gt; array(
        <span class="stringliteral">&#39;consumer_key&#39;</span> =&gt; CONSUMER_KEY,
        <span class="stringliteral">&#39;consumer_secret&#39;</span> =&gt; CONSUMER_SECRET        
    )
);
$bv = <span class="keyword">new</span> <a class="code" href="class_bluevia_client.html">BlueviaClient</a>($application_context);
</pre></div><p> Once configured, you are able to get your Location API client: </p>
<div class="fragment"><pre class="fragment"><span class="comment">// Get Location API client</span>
$location = $bv-&gt;getService(<span class="stringliteral">&#39;Location&#39;</span>);
</pre></div><h2><a class="anchor" id="location_getting_location_sec">
Retrieving the geographical coordinates of a terminal</a></h2>
<p>To retrieve the geographical coordinates of a terminal you can use the getLocation function that allows an user to retrieve the geographical coordinates of a terminal. These geographical coordinates are expressed through a latitude, longitude, altitude and accuracy. </p>
<div class="fragment"><pre class="fragment">$response = $location-&gt;getLocation();        
</pre></div><p>Once the server responds the user have to retrieve the location information from the returned LocationDataType instance. The LocationDataType includes the status of the client request and the LocationInfoType member which contains the location information. </p>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Tue Aug 30 21:02:06 2011 for Bluevia by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
